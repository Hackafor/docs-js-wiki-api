import{_ as s,c as a,o as n,a as e}from"./app.2db56847.js";const F=JSON.parse('{"title":"Roles y Permisos","description":"","frontmatter":{},"headers":[{"level":2,"title":"Api Elasticsearch","slug":"api-elasticsearch","link":"#api-elasticsearch","children":[]},{"level":2,"title":"Kibana Panel","slug":"kibana-panel","link":"#kibana-panel","children":[]}],"relativePath":"roles.md"}'),l={name:"roles.md"},o=e(`<h1 id="roles-y-permisos" tabindex="-1">Roles y Permisos <a class="header-anchor" href="#roles-y-permisos" aria-hidden="true">#</a></h1><p><a href="https://www.elastic.co/guide/en/elasticsearch/reference/current/security-api-put-role.html" target="_blank" rel="noreferrer">Docs Elasticsearch Roles y Permisos</a></p><p>Nosotros podemos crear nuevos roles y que puedan acceder o no a la informacion</p><h2 id="api-elasticsearch" tabindex="-1">Api Elasticsearch <a class="header-anchor" href="#api-elasticsearch" aria-hidden="true">#</a></h2><p>Este es un ejemplo de creacion de un rol para tener permisos de lectura en los indices de &#39;db_logs&#39; y los db logs del microservicio main_frame</p><div class="language-sh"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki github-dark vp-code-dark" tabindex="0"><code><span class="line"><span style="color:#B392F0;">curl</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">--user</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">elastic:elastic</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">\\</span></span>
<span class="line"><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-X</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">POST</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&quot;localhost:9200/_security/role/db_reader?pretty&quot;</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">\\</span></span>
<span class="line"><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-H</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&#39;Content-Type: application/json&#39;</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">\\</span></span>
<span class="line"><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-d</span><span style="color:#9ECBFF;">&#39;</span></span>
<span class="line"><span style="color:#9ECBFF;">{</span></span>
<span class="line"><span style="color:#9ECBFF;">  &quot;cluster&quot;: [&quot;all&quot;],</span></span>
<span class="line"><span style="color:#9ECBFF;">  &quot;indices&quot;: [</span></span>
<span class="line"><span style="color:#9ECBFF;">    {</span></span>
<span class="line"><span style="color:#9ECBFF;">      &quot;names&quot;: [ &quot;main_frame_db_logs&quot;, &quot;*db_logs&quot; ],</span></span>
<span class="line"><span style="color:#9ECBFF;">      &quot;privileges&quot;: [&quot;read&quot;]</span></span>
<span class="line"><span style="color:#9ECBFF;">    }</span></span>
<span class="line"><span style="color:#9ECBFF;">  ]}</span></span>
<span class="line"><span style="color:#9ECBFF;">&#39;</span></span>
<span class="line"></span></code></pre><pre class="shiki github-light vp-code-light" tabindex="0"><code><span class="line"><span style="color:#6F42C1;">curl</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">--user</span><span style="color:#24292E;"> </span><span style="color:#032F62;">elastic:elastic</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">\\</span></span>
<span class="line"><span style="color:#24292E;"> </span><span style="color:#005CC5;">-X</span><span style="color:#24292E;"> </span><span style="color:#032F62;">POST</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&quot;localhost:9200/_security/role/db_reader?pretty&quot;</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">\\</span></span>
<span class="line"><span style="color:#24292E;"> </span><span style="color:#005CC5;">-H</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&#39;Content-Type: application/json&#39;</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">\\</span></span>
<span class="line"><span style="color:#24292E;"> </span><span style="color:#005CC5;">-d</span><span style="color:#032F62;">&#39;</span></span>
<span class="line"><span style="color:#032F62;">{</span></span>
<span class="line"><span style="color:#032F62;">  &quot;cluster&quot;: [&quot;all&quot;],</span></span>
<span class="line"><span style="color:#032F62;">  &quot;indices&quot;: [</span></span>
<span class="line"><span style="color:#032F62;">    {</span></span>
<span class="line"><span style="color:#032F62;">      &quot;names&quot;: [ &quot;main_frame_db_logs&quot;, &quot;*db_logs&quot; ],</span></span>
<span class="line"><span style="color:#032F62;">      &quot;privileges&quot;: [&quot;read&quot;]</span></span>
<span class="line"><span style="color:#032F62;">    }</span></span>
<span class="line"><span style="color:#032F62;">  ]}</span></span>
<span class="line"><span style="color:#032F62;">&#39;</span></span>
<span class="line"></span></code></pre></div><p>Podemos assignar diferentes permisos como <code>read</code>, <code>all</code>, <code>write</code></p><h2 id="kibana-panel" tabindex="-1">Kibana Panel <a class="header-anchor" href="#kibana-panel" aria-hidden="true">#</a></h2><ul><li>Esto mismo podemos hacer desde el panel de Kibana</li></ul><p>Nos autenticamos con un usuario con suficientes permisos y vamos a la url <code>app/management/security/roles</code> para configurar los roles</p><p><img src="https://i.postimg.cc/rs0BZzHt/role-creation.png" alt=""></p><ul><li>Le podemos indicar que se comporte como un usuario en especifico</li></ul><p><img src="https://i.postimg.cc/RhhHkx1t/config-role1.png" alt=""></p><ul><li>Tambien a que indices puede acceder y con que permisos</li></ul><p><img src="https://i.postimg.cc/054Mz3dt/privileges-role.png" alt=""></p><ul><li>Si puede acceder a kibana y con que caracteristicas</li></ul><p><img src="https://i.postimg.cc/Kj3Y7Gr0/kibana-privileges.png" alt=""></p>`,17),p=[o];function t(c,r,i,u,d,y){return n(),a("div",null,p)}const h=s(l,[["render",t]]);export{F as __pageData,h as default};
